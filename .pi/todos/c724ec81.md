{
  "id": "c724ec81",
  "title": "HTTP server with script injection",
  "tags": [
    "phase-1",
    "mvp"
  ],
  "status": "closed",
  "created_at": "2026-01-27T08:57:32.601Z"
}

# HTTP Server with Script Injection

Implement plain Node.js HTTP server that:
1. Serves static files from the presentation directory
2. Injects `injected.js` script into HTML files
3. Serves client files (presenter.html, etc.) from `/_/` path

## Routes
- `GET /` → Serve presentation (index.html with injection)
- `GET /*.html` → Serve HTML with injection
- `GET /*` → Serve static files (CSS, JS, images) as-is
- `GET /_/presenter` → Serve presenter.html (no injection)
- `GET /_/client/*` → Serve client assets

## Injection Logic (src/injector.js)
```javascript
// Insert before </body>
const INJECT_SCRIPT = `<script src="/_/client/injected.js"></script>`;

function injectScript(html) {
  // Find </body> and insert script before it
  // Handle edge cases: no </body>, self-closing, etc.
}
```

## Server (src/server.js)
- Use plain `http.createServer`
- Proper MIME types for common extensions
- 404 handling
- Read files from presentation path

## Tasks
- [ ] Create src/server.js with basic static file serving
- [ ] Create src/injector.js with HTML injection logic
- [ ] Add /_/ route handling for client files
- [ ] Add MIME type detection
- [ ] Test with a simple HTML file

## Depends on
- TODO-40a1db1a (Project setup)
