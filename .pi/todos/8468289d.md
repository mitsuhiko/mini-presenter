{
  "id": "8468289d",
  "title": "[Follow-up] Presenter authentication",
  "tags": [
    "phase-3",
    "follow-up"
  ],
  "status": "pending",
  "created_at": "2026-01-27T08:59:46.789Z"
}

# Presenter Authentication (Follow-up)

Protect the presenter view with optional authentication to prevent unauthorized control.

## CLI Interface

```bash
mini-presenter ./slides/ --presenter-key mySecretKey123
```

## Implementation

### Key-based Authentication
1. CLI generates or accepts a key
2. Presenter URL includes key: `/_/presenter?key=mySecretKey123`
3. Server validates key before serving presenter.html
4. WebSocket connection also requires key for 'presenter' role

### Behavior
- Display view (`/`) - no auth required
- Presenter view (`/_/presenter`) - requires key if configured
- Without `--presenter-key`, no auth (default)

### Server Changes
```javascript
// On HTTP request to /_/presenter
if (config.presenterKey) {
  const providedKey = url.searchParams.get('key');
  if (providedKey !== config.presenterKey) {
    return respond(401, 'Unauthorized');
  }
}

// On WebSocket register as presenter
if (msg.role === 'presenter' && config.presenterKey) {
  if (msg.key !== config.presenterKey) {
    ws.close(4001, 'Unauthorized');
    return;
  }
}
```

### CLI Output
```
mini-presenter v0.1.0

  Display:   http://localhost:3000/
  Presenter: http://localhost:3000/_/presenter?key=abc123

  Press Ctrl+C to stop
```

## Tasks
- [ ] Add --presenter-key CLI option
- [ ] Validate key on /_/presenter HTTP requests
- [ ] Validate key on WebSocket presenter registration
- [ ] Include key in presenter URL in CLI output
- [ ] Update presenter.js to send key with register message

## Depends on
- Phase 1 complete
